let pokemonRepository=function(){let e=[];function t(t){e.push(t)}function n(){return e}function i(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){return e.imageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height/10,e.weight=t.weight/10,e.types=t.types,e.baseStats=t.stats.map(function(e){return{name:e.stat.name.toUpperCase().replace("-"," "),value:e.base_stat}}),fetch(t.species.url)}).then(function(e){return e.json()}).then(function(t){e.genus=t.genera.find(e=>"en"===e.language.name).genus}).catch(function(e){console.error(e)})}return{add:t,getAll:n,addListItem:function e(t){var n;let a=document.querySelector(".list"),r=document.createElement("li"),l=document.createElement("button"),o=document.createElement("img");switch(l.innerHTML=`No.${t.num}: `,t.name){case"Nidoran-f":l.innerHTML+=`${t.name.replace("-f","&#9792;")}`;break;case"Nidoran-m":l.innerHTML+=`${t.name.replace("-m","&#9794;")}`;break;case"Mr-mime":l.innerHTML+=`${t.name.replace("-m",". M")}`;break;default:l.innerHTML+=`${t.name}`}l.classList.add("pokemon-item"),l.addEventListener("click",function(){(function e(t){i(t).then(function(){listModal.showModal(t),console.log(t)})})(t)}),o.classList.add("sprite"),r.appendChild(l),a.appendChild(r),l.appendChild(o),(n=t,fetch(n.detailsUrl).then(function(e){return e.json()}).then(function(e){return e.sprites.versions["generation-viii"].icons.front_default}).catch(function(e){console.error(e)})).then(function(e){o.src=e})},loadList:function n(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function(e){return e.json()}).then(function(n){n.results.forEach(function(n){t({name:n.name.charAt(0).toUpperCase()+n.name.slice(1),detailsUrl:n.url,num:e.length+1})})}).catch(function(e){console.error(e)})},loadDetails:i,filterItems:function e(t){let n=pokemonRepository.getAll().filter(function(e){return e.name.toLowerCase().replace("-"," ").includes(t)});document.querySelector(".list").innerHTML="",n.forEach(function(e){pokemonRepository.addListItem(e)})}}}(),listModal=function(){function e(){document.querySelector("#modal-container").classList.remove("is-visible")}return window.addEventListener("keydown",t=>{let n=document.querySelector("#modal-container");"Escape"===t.key&&n.classList.contains("is-visible")&&e()}),{showModal:function t(n){let i=document.querySelector("#modal-container");i.innerHTML="";let a=document.createElement("div");a.classList.add("modal");let r=document.createElement("div");r.classList.add("modal-header");let l=document.createElement("button");l.classList.add("modal-close"),l.innerHTML="&times;",l.addEventListener("click",e);let o=document.createElement("div");o.classList.add("modal-content");let s=document.createElement("div");s.classList.add("modal-image");let c=document.createElement("img");c.src=n.imageUrl;let d=document.createElement("h1");switch(d.innerHTML=`No.${n.num}: `,n.name){case"Nidoran-f":d.innerHTML+=`${n.name.replace("-f","&#9792;")}`;break;case"Nidoran-m":d.innerHTML+=`${n.name.replace("-m","&#9794;")}`;break;case"Mr-mime":d.innerHTML+=`${n.name.replace("-m",". M")}`;break;default:d.innerHTML+=`${n.name}`}d.classList.add("modal-title");let m=document.createElement("div");m.classList.add("modal-content__info");let p=document.createElement("div");p.innerText=n.genus,p.classList.add("subtitle");let u=document.createElement("div");u.innerHTML=`Height: ${n.height}m<br>Weight: ${n.weight}kg`,u.classList.add("height"),i.appendChild(a),a.appendChild(r),a.appendChild(o),r.appendChild(l),o.appendChild(s),o.appendChild(m),s.appendChild(c),m.appendChild(d),m.appendChild(p),n.types.forEach(function(e){let t=e.type.name.charAt(0).toUpperCase()+e.type.name.slice(1),n=document.createElement("div");n.innerText=t,n.classList.add("type",t),m.appendChild(n)}),m.appendChild(u);let h=document.createElement("h2");h.innerText="BASE STATS",m.appendChild(h),n.baseStats.forEach(function(e){let t=document.createElement("div");t.innerHTML=`<b>${e.name}</b>: ${e.value}`,m.appendChild(t)}),i.classList.add("is-visible"),i.addEventListener("click",t=>{t.target===i&&e()})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),document.querySelector(".search-bar input").addEventListener("input",function(){let e=this.value.toLowerCase();pokemonRepository.filterItems(e)});